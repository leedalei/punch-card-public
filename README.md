# autoPunchCard
autoPunchCard for smartHR

## 文件说明
- index.html是前端页面
- index.js是服务端的入口文件，controller没有分离出来，也在index.js中处理
- serviceLogin和serviceRecord是登录以及打卡的主要逻辑
- pos中存储的是抓包数据的集合（主要是位置信息），防止每次打卡地点都一样
- token是存储的token信息，使用简单的文本来保存信息，会在刷新token的时候更新

## 代码替换方法
主要替换的是几个接口里的请求内容，这个需要自己抓包，替换成自己的登录信息。安卓和ios的传参有些许不同。

## 启动
放到服务器中，执行
```
node  index.js
```

## 访问
你的域名:7777 // www.baidu.com:7777

## 使用
界面中有
1. 一个输入框
2. 一个发送验证码按钮
3. 一个打卡按钮

打卡需要登录
- 如果你没有登录，那么你需要先点击【发送验证码】，收到验证码后在输入框中填入验证码，然后点击【打卡】即可
- 如果你已经登录了，那么只需要点击【打卡】即可

token有效时间为一天(记忆中是这样)，每次打卡的时候都会刷新token，所以如果你每天都打卡的话，那么是不会丢失登录态的，就不用点击发送验证码。
只有在以下几种情况才会丢失登录态，需要发送验证码来重新登录。
1. 第一次使用
2. 好几天没打过卡，token过期
3. 自己在其他地方登录了智慧人事，把服务器端的登录挤掉了
